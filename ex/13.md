# â™»ï¸ Ciclo de Vida

Cada componente de Vue tiene su propio [ciclo de vida](https://vuejs.org/images/lifecycle.png). Esto quiere decir que desde el momento que se crea hasta que muere, cada instancia atraviesa ciertos etapas o momentos.

Gracias a los *hooks* de Vue, podemos establecer cÃ³digo que se ejecute a medida que nuestro componente vaya pasando por estas etapas. Los *hooks* son funciones (con nombres predeterminados) que se *setean* en el `vm`.

Estos son los mÃ¡s importantes *hooks* en orden de ejecuciÃ³n (se ejecutan una sola vez):

1. `beforeCreate` â¡ï¸ Se crea la instancia pero todavÃ­a no se inicializÃ³ (no existe `data`, `methods`, etc.)
2. `created` â¡ï¸ Instancia creada e inicializada (podemos acceder a `data`, `methods`, etc.)
3. `beforeMount` â¡ï¸ El template esta compilado pero no estÃ¡ montado en el DOM
4. `mounted` â¡ï¸ El template estÃ¡ compilado y montado en el DOM
5. `beforeDestroyed` â¡ï¸ La instancia estÃ¡ por ser destruida pero todavÃ­a es funcional
6. `destroyed` â¡ï¸ La instancia fue destruida (no podemos acceder a `data`, `methods`, etc.)

Y tambiÃ©n tenemos estos que pueden ejecutarse N cantidad de veces:

1. `beforeUpdate` â¡ï¸ Se actualizÃ³ informaciÃ³n pero todavÃ­a no se aplicaron los cambios al DOM
2. `updated` â¡ï¸ Se actualizÃ³ informaciÃ³n y los cambios se aplicaron al DOM


## `created()`

Agregamos a nuestra app un caso de uso para poder usar el *hook* `created`. Este es uno de los mÃ¡s comunes y utilizados. Sirve principalmente para poder realizar peticiones HTTP, *setear* data o determinar valores defaults (entre otras cosas).

Para este ejercicio vamos a soportar que alguien pueda acceder a nuestra aplicaciÃ³n pasando el valor de la bÃºsqueda como la primer parte del path de la URL y disparar la bÃºsqueda de forma automÃ¡tica tomando ese valor. Por ejemplo si alguien ingresa directamente al sitio con esta URL `http://localhost:8081/rafaga` deberÃ­amos ejecutar el mÃ©todo `search` con la query `'rafaga'`.

1. Primero vamos a crear el *hook* `created`. Como explicamos antes, la forma de crearlo es agregando una funciÃ³n con el nombre `created` dentro de nuestro `vm`.
2. Dentro de esta funciÃ³n vamos a tomar el *path* de la URL usando el objeto `location` del browser â¡ï¸ `location.pathname`.
3. Ahora debemos identificar cuÃ¡ndo nos estan pasando un valor de bÃºsqueda en la URL y cuÃ¡ndo no. Esto podemos determinarlo a travÃ©s de la cantidad de caracteres de `location.pathname`.
    1. Si `location.pathname === '/'` significa que no se estÃ¡ especificando ningÃºn valor de bÃºsqueda, por lo cual no deberÃ­amos hacer nada.
    2. Si `location.pathname !== '/'` quiere decir que tenemos un valor default para nuestra propiedad `query`. En ese caso dentro del *hook* vamos a asignar el valor del `pathname` a `query` (tenga en cuenta que debemos evadir el primer carÃ¡cter de `pathname` ya que es `'/'`) y luego vamos a llamar al mÃ©todo `search`.

  ![13](../img/13.gif)


  ```javascript
  created () {
    if (location.pathname === '/') { return }

    // El primer caracter es '/' por lo cual vamos a omitirlo
    this.query = location.pathname.substring(1)
    this.search()
  },
  ```

> Todos los *hooks* se implementan de la misma manera, se agrega una funciÃ³n con el nombre del *hook* dentro del `vm` y se ejecuta el cÃ³digo que se requiera. Simplemente tengan en cuenta las limitaciones y caracterÃ­sticas de cada uno.

___
### ğŸ¤“ Extras
Lo mÃ¡s correcto serÃ­a usar *query strings* para *setear* la query de bÃºsqueda en la URL en lugar de usar el path. No lo hacemos ya que no tenemos una forma nativa para acceder a eso usando JS y tenemos que crearnos una funciÃ³n que nos ayude a *parsear* la url y obtener el valor. Si quieren pueden refactorizar el cÃ³digo para obtener el valor de `query` usando *query strings*.

### ğŸ“ [SoluciÃ³n](https://github.com/ianaya89/workshop-vuejs/blob/master/hints/13.md)

[âª](https://github.com/ianaya89/workshop-vuejs/blob/master/ex/12.md)  [â©](https://github.com/ianaya89/workshop-vuejs/blob/master/ex/14.md)

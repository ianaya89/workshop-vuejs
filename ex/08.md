#  vue-coins

Ya generamos el *scaffolding* de nuestra aplicaci贸n y por otro lado repasamos cuales son los archivos m谩s importantes de la estructura generada por el CLI.

Ahora que entendemos como funciona todo, es momento de empezar a escribir c贸digo de verdad. Para este workshop vamos a crear una aplicaci贸n web (*full client-side*) que nos permite interactuar con la [API de Coincap](https://docs.coincap.io).

>  Coincap es una API p煤blica que nos permite obtener informaci贸n en tiempo real sobre Criptomonedas.

![vue-coins](../img/vue-coins.png)

> En la imagen podes ver una previsualizaci贸n de la app que vamos a construir.


## Coincap API

Lo primero que vamos a hacer es crear un m贸dulo para interactuar con la api de Coincap.
La ventaja de Vue, como hablamos al principio, es que se encarga solamente de la capa visual de *MV*\*. Entonces tenemos la libertad de manejar la l贸gica como m谩s nos guste. En este caso para resolver las llamadas HTTP a la API vamos a utilzar la API [fetch](https://developer.mozilla.org/es/docs/Web/API/Fetch_API/Utilizando_Fetch) nativa de los browsers (basada en [Promises](https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Promise)).

1. Creamos dentro de `src/` una carpeta que se llame `services` y dentro de esta creamos un archivo que con el nombre `coincap.js` ★ `src/services/coincap.js`

2. Recuerden que trabajamos con el concepto de m贸dulos: un archivo `.js` es un m贸dulo que podemos importar dentro de otro. Vamos a crear una constante `BASE_URL`.

```javascript
const BASE_URL = 'https://api.coincap.io/v2'
```

1. Tambien vamos a crear y exportar una funciona para luego utilizar en nuestros componentes. Una de las funciones de la API es obtener un [listado completo de *assets* o *coins*](https://docs.coincap.io/?version=latest#89deffa0-ab03-4e0a-8d92-637a857d2c91). Vamos a crear en nuestro servicio un m茅todo que interactue con este *endpoint*.

```js
const BASE_URL = 'https://api.coincap.io/v2'

export function getAssets () {
  // Usando template strings de ES2015 armamos la url del endpoint con
  // el formato esperado por la API.
  const url = `${BASE_URL}/assets`

  // Retornamos la llamada de fetch (recuerden que devuelve una Promise).
  // Fetch recibe como primer parametro la url y luego un objeto
  // con configuracion donde pasamos el tipo de metodo HTTP
  return fetch(url, { method: 'GET' })
    .then(res => {
      // En el caso de que hay un error disparamos una excepci贸n
      // para luego manejarla en nuestro componente
      if (res.status !== 200) {
        throw res.statusText
      }

      // Casteamos la respuesta y la devolvemos para
      // usarla luego en el componente
      return res.json()
    })
}

```

Ya tenemos lo que necesitamos para integrar Coincap en los componentes Vue. Como dec铆amos antes, este c贸digo que escribimos es JS plano, podr铆amos utilizarlo en un proyecto React y funcionar铆a de la misma manera.

> Esta manera de agrupar funcionalidad en una carpeta `services` es un patr贸n bastante com煤n y pr谩ctico a la hora de desarrollar aplicaciones con Vue. Es importante aclarar que no es obligatorio utilizarlo y podr铆amos hacerlo de diferentes formas.

___

###  [Soluci贸n](https://github.com/ianaya89/vue-coins/tree/08)

[](https://github.com/ianaya89/workshop-vuejs/blob/master/ex/07.md)  [](https://github.com/ianaya89/workshop-vuejs/blob/master/ex/09.md)

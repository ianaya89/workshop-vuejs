#  *Filters* [WIP]

Muchas veces queremos que a la informaci贸n que se le muestra al usuario se le aplique alg煤n tipo de transformaci贸n, esto suele ocurrir porque para el c贸digo necesitamos cierto formato o tipo de dato pero para el usuario final (en la vista) es mejor expresarlo de manera diferente.

Por ejemplo podemos tener alg煤n tipo de propiedad de num茅rica que refleje el valor total de una transacci贸n comercial. Como desarrolladores necesitamos que esa propiedad sea num茅rica porque tenemos que realizar operaciones aritm茅ticas sobre la misma, pero seguramente a la hora de mostrar eso por pantalla necesitemos un `String` donde podemos darle consistencia al resultado a trav茅s s铆mbolos como `$` o `.`. De esta manera mi propiedad con valor igual a `1999` sera renderizada como `$ 1.999`.

Podr铆amos realizar este tipo de transformaciones utilizando propiedades computadas, pero esto terminar铆a agregando complejidad y perjudicando la *performance* de la aplicaci贸n, ya que voy a estar duplicando en el c贸digo propiedades (una para el desarrollador y otro para el usuario). Por suerte Vue, tambi茅n nos ofrece una alternativa para estos casos y son los filtros.

Los filtros permiten crear estas transformaciones sobre las propiedades sin modificar el valor en si. Cuando aplique un filtro la propiedad se mostrara en pantalla transformada pero el valor de la propiedad en el `vm` no se va ver afectado.

## `Vue.filter()`

El metodo estatico `Vue.filter()` nos permite crear filtros de manera global. Esto quiere decir que van a poder ser utilizados por cualquiera de nuestros componentes.

La funci贸n recibe dos par谩metros, el primero es el nombre del filtro. Este nombre es importante ya que define como vamos a llamarlo luego en el HTML. El segundo par谩metro es una funci贸n. Esta funci贸n recibe como argumento el valor a la cual se le quiere aplicar el filtro y debe retornar un nuevo valor (transformado) para renderizar.

Vamos a crear un filtro global que nos permita mostrar todos los g茅neros que tiene asociado un artista. Esta informaci贸n es provista por la API de Spotify por lo tanto ya la tenemos disponible.

1. Abrimos el archivo `main.js`. Como es un filtro global vamos a crearlo en el archivo principal.

2. Creamos el filtro con el nombre `comma-list` y definimos la funci贸n que va transformar la informaci贸n.

```javascript
Vue.filter('comma-list', (val) => {
  if (!val || !val.genres) { return '' }

  return val.join(', ')
})
```

Como la propiedad *genres* de cada artista es un `Array`, vamos a usar el m茅todo join para representar el array como un `String` separado por comas.

3. El filtro ya esta creado y listo para usar, simplemente nos queda integrarlo con el HTML. Vamos al componente `Artist.vue` y debajo del tag `<img>` agregamos un tag `<small>` para mostrar los g茅neros.

```html
<small> {{ artist.genres | comma-list }}</small>
```

Listo, como podemos ver la manera de insertar un filtro en una expresion es ` {{ valor | filtro }}`. De hecho se podrian agregar N cantidad de filtros y estos se van a ir pasando el valor transformado y ejecutandose en orden secuencial: {{ valor | filtro1 | filtro2 | filtro3 }}

---
###  Extras
Para tener une estructura de nuestra app mas consistente. Podemos crear una carpeta `filters` (al mismo nivel de components), crear un archivo con el nombre `comma-list.js`, y poner el codigo de nuestro filtro en ese archivo. Luego nos quedaria hacer un `import './filters/comma-list'` desde nuestro `main.js`

<!-- ###  [Soluci贸n](https://github.com/ianaya89/workshop-vuejs/blob/master/hints/16.md) -->
